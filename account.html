<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MINARA5 — Account</title>

<style>
/* =========================================================
   RESET + PAGE FOUNDATION
========================================================= */
*{margin:0;padding:0;box-sizing:border-box;}

html, body {
    height: 100%;
}

body{
  display:flex;
  flex-direction:column;
  font-family:Helvetica,Arial,sans-serif;
  background:#fff;
  overflow-x:hidden;
  color:#000;
}

/* =========================================================
   HEADER — NEW 3-COLUMN HIGH-FASHION LAYOUT
========================================================= */

header{
  position:fixed;
  top:0; left:0; right:0;
  height:60px !important; /* thicker header */
  background:rgba(255,255,255,0.96);
  border-bottom:1px solid #eee;
  display:grid;
  grid-template-columns:1fr auto 1fr;
  align-items:center;
  padding-left:29px !important;
  padding-right:29px !important;
  z-index:1200;
}

.header-left,
.header-right {
    align-items: flex-start !important;
    padding-top: 0 !important;
    margin-top: -29px !important; /* fine-tune vertical alignment */
}


.header-left{
  display:flex;
  align-items:center;
  gap:27px !important;
}

.header-left a{
  font-size:12px;
  text-transform:uppercase;
  letter-spacing:1px;
  color:#000;
  text-decoration:none;
}

.menu-icon{
  display:none;
  cursor:pointer;
}
.menu-icon img{height:14px;}

.mobile-shopnow{display:none;}
.mobile-shopnow a{
  font-size:11px;
  text-transform:uppercase;
  color:#000;
  text-decoration:none;
}

/* CENTER LOGO */
.header-center{
  display:flex;
  justify-content:center;
}
.header-logo{
  width:190px !important;
  pointer-events:none;
  user-select:none;
}

/* RIGHT SIDE */
.header-right{
  display:flex;
  justify-content:flex-end;
  align-items:center;
}
.header-right ul{
  list-style:none;
  display:flex;
  gap:27px !important;
}
.header-right ul li a{
  font-size:11px;
  text-transform:uppercase;
  color:#000;
  text-decoration:none;
  display:flex;
  align-items:center;
  gap:6px;
}

/* Icons */
.desktop-icon{height:12px;}
.question-icon{height:14px;}

/* CART BUTTON */
.cart-btn{
  display:flex;
  gap:4px;
  align-items:center;
  cursor:pointer;
}
.cart-btn img{height:16px;}
.cart-btn span{font-size:12px;}

/* MOBILE HEADER */
@media(max-width:900px){
  header{
    grid-template-columns:auto 1fr auto;
  }
  .header-left a.desktop-only{display:none;}
  .header-right ul li a.desktop-only{display:none;}
  .menu-icon{display:block;}
  .mobile-shopnow{display:block; position:absolute; top:22px; left:65px;}
}
/* REMOVE DESKTOP ACCOUNT ICON ON MOBILE */
.header-account{
  display:none;
}
@media(max-width:900px){
  .header-left,
  .header-right{
    width:0;
    padding:0;
  }
}


/* SMALLER LOGO ON MOBILE */
@media(max-width:900px){
  .header-logo{
    width:110px !important;
  }
}



/* =========================================================
   CART PANEL
========================================================= */
#pageDimmer{
  position:fixed; inset:0;
  background:rgba(0,0,0,0.32);
  backdrop-filter:blur(1.4px);
  opacity:0; pointer-events:none;
  transition:opacity .25s;
  z-index:9000;
}
#pageDimmer.active{opacity:1;pointer-events:auto;}

#cartPanel{
  position:fixed;
  top:0; right:-100%;
  height:100vh;
  width:65vw;
  background:#fff;
  border-left:1px solid #dcdcdc;
  z-index:10000;
  display:flex;
  flex-direction:column;
  transition:right .35s ease;
  overflow:hidden;
}
@media(min-width:901px){#cartPanel{width:26vw;}}
#cartPanel.open{right:0;}

.cart-header-row{
  background:#fff;
  padding:14px 20px;
  border-bottom:1px solid #dcdcdc;
  font-size:11px;
  text-transform:uppercase;
  display:flex; justify-content:space-between;
}
.cart-close{cursor:pointer;}

.cart-ascii-wrap{padding:12px 20px;border-bottom:1px solid #dcdcdc;background:#fafafa;}
.cart-ascii{
  white-space:pre;
  font-family:monospace;
  font-size:9px;
  line-height:1.1;
}

.cart-body{padding:16px 20px;font-size:11px;}
.cart-auth-links{display:flex;gap:30px;margin-top:8px;}
.cart-auth-links a{text-decoration:none;color:#000;text-transform:uppercase;font-size:11px;}

.cart-bottom{margin-top:auto;}
.cart-section{
  padding:12px 20px;
  border-top:1px solid #dcdcdc;
  font-size:11px;
  text-transform:uppercase;
}

/* =========================================================
   MOBILE MENU PANEL
========================================================= */
.slideout{
  position:fixed;
  top:0; left:-100%;
  width:100%; height:100vh;
  background:#fff;
  z-index:5000;
  transition:left .35s;
  padding:50px 40px 40px;
}
.slideout.open{left:0;}

.close-btn{
  position:absolute; top:18px; right:24px;
  font-size:30px; cursor:pointer;
}

.slideout a{
  display:block;
  font-size:14px;
  text-transform:uppercase;
  letter-spacing:0.28em;
  margin:26px 0;
  color:#000;
  text-decoration:none;
}

/* =========================================================
   ACCOUNT PAGE LAYOUT
========================================================= */
.wrapper {
  width: 100%;
  max-width: 450px !important; 
  /* 120px top, auto left/right (centers it), 60px bottom */
  margin: 120px auto 60px !important; 
  padding: 0 20px;
  display: block; 
}

.box {
  width: 100%;
  background: #fff;
  padding: 40px;
  border: 1px solid #000;
  box-sizing: border-box;
}

h1{
  font-size:26px;
  font-weight:600;
  text-align:center;
  letter-spacing:2px;
  margin-bottom:40px;
}

/* INTRO (DIOR STYLE) */
.account-intro{
  margin-bottom:50px;
  font-size:13px;
  letter-spacing:0.3px;
}

.intro-title{
  font-size:18px;
  font-weight:500;
  margin-bottom:8px;
}

.intro-location{
  font-size:12px;
  margin-bottom:16px;
}

.change-location{
  color:#000;
  text-decoration:underline;
  cursor:pointer;
}

.intro-benefits{
  list-style:none;
  font-size:12px;
  line-height:1.7;
}
.intro-benefits li::before{content:"— ";}

/* LOGIN & REGISTER BOXES */
.box{
  border:1px solid #000;
  padding:30px;
  margin-bottom:40px;
  display:none;
}

.box-title{
  font-size:14px;
  text-transform:uppercase;
  letter-spacing:1.5px;
  margin-bottom:20px;
}

input{
  width:100%;
  padding:12px 14px;
  margin-top:12px;
  border:none;
  border-bottom:1px solid #000;
  background:transparent;
  font-size:14px;
  outline:none;
}

button{
  margin-top:28px;
  width:100%;
  padding:14px 0;
  background:#000;
  color:#fff;
  letter-spacing:1.5px;
  border:none;
  cursor:pointer;
}
button:hover{opacity:0.85;}

#user-info{
  display:none;
  text-align:center;
  margin-top:40px;
  font-size:14px;
}

/* =========================================================
   FOOTER — FIXED TO BOTTOM
========================================================= */
footer{
  margin-top:auto !important;
  background:#f5f5f5;
  padding:21px 0;
  text-align:center;
  font-size:9px;
  letter-spacing:0.2em;
  text-transform:uppercase;
}
/* ================================
   ACCOUNT DROPDOWN (FINAL VERSION)
=================================== */

.header-account .account-trigger {
    display: flex;
    align-items: center;
    gap: 6px;
    cursor: pointer;
}

.account-label {
    color: #000 !important;
    font-size: 11px !important;
    text-transform: uppercase;
    letter-spacing: 1px;
    text-decoration: none !important;
    line-height: 1;
    user-select: none;
}

/* Dropdown box */
.acc-dropdown {
    position: fixed; 
    top: 0;           
    right: 0;         
    width: 360px;     
    background: #fff;
    border-left: 1px solid #eee;
    box-shadow: -5px 0 20px rgba(0,0,0,0.05);
    display: none;
    z-index: 10001; /* Must be higher than the dimmer */
}

/* FORCING DIMMER TO SHOW */
#pageDimmer.active {
    display: block !important;
    opacity: 1 !important;
    pointer-events: auto !important;
    z-index: 10000 !important; /* One level below the dropdown */
}

.acc-head {
    /* Tight top/side padding, but bottom padding creates the gap before the line */
    padding: 8px 12px 20px 12px; 
    border-bottom: 1px solid #000;
    display: flex;
    justify-content: space-between; 
    align-items: flex-start; /* Keeps text at the very top */
}

#accName {
    font-size: 10.5px; /* Very slightly smaller */
    font-weight: 700;
    letter-spacing: 1px;
    text-transform: uppercase;
    color: #000;
}

.acc-close {
    cursor: pointer;
    font-size: 10.5px; 
    font-weight: 400;
    letter-spacing: 1.2px;
    color: #00008B; 
    text-transform: uppercase;
}

/* Menu items - Tighter boxes */
.acc-item {
    display: block;
    padding: 10px 12px; /* Smaller boxes, text closer to left/top borders */
    font-size: 10.5px;    
    letter-spacing: 1px;
    text-transform: uppercase;
    color: #00008B !important; 
    text-decoration: none !important;
    border-bottom: 1px solid #eee;
}

.acc-item:hover {
    text-decoration: underline !important;
    background: #fcfcfc;
}
@media (max-width:900px){

  .mobile-account-block{
    margin-top:26px;
  }

  .mobile-account-link{
    display:flex;
    align-items:center;
    justify-content:space-between;
    font-size:14px;
    text-transform:uppercase;
    letter-spacing:0.28em;
    margin:26px 0;
    cursor:pointer;
    color:#000;
    -webkit-tap-highlight-color:transparent;
    user-select:none;
  }

  .mobile-arrow{
    margin-left:8px;
    font-size:14px;
    transition:transform .25s ease;
    pointer-events:none;
  }

  .mobile-arrow.open{
    transform:rotate(90deg);
  }

  .mobile-account-dropdown{
    margin-top:14px;
  }

  .mobile-account-dropdown .acc-item{
    background:#f4f4f4;
    margin:10px 0;
    padding:16px 18px;
    border:none;
    font-size:13px;
    letter-spacing:0.22em;
  }

  .mobile-account-link.logout{
    margin-top:66px;
  }
}
/* MOBILE ACCOUNT BUTTON */
.mobile-account{
  font-size:14px;
  text-transform:uppercase;
  letter-spacing:0.28em;
  margin:26px 0;
  color:#000;
  cursor:pointer;
  user-select:none;
}

.account-link {
  color: #551A8B;
  text-decoration: underline;
  cursor: pointer;
}

.account-link:hover {
  opacity: 0.6;
}

/* This ensures the color stays #551A8B no matter what */
.account-link, 
.account-link:link, 
.account-link:visited {
  color: #551A8B !important;
  text-decoration: underline !important;
  cursor: pointer;
}

.account-link:hover {
  opacity: 0.6;
}

.login-subtext {
    font-size: 10px;           /* Smaller font size */
    text-transform: uppercase; /* Keeps the high-fashion look */
    letter-spacing: 1px;      /* Matches your existing styling */
    opacity: 0.5;             /* Slightly translucent effect */
    text-align: left;         /* Left-aligned */
    margin-top: 8px;          /* Small gap below the main header */
    margin-bottom: 20px;      /* Space before the input box */
}

/* Styling for the email display in the password step */
#display-selected-email {
    opacity: 0.5; /* Makes the email semi-translucent */
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* Matching the Edit button to the Forgot Password color */
.edit-btn {
    color: #00008B !important; /* Matches the dark blue of forgot password */
    font-size: 10px;
    text-transform: uppercase;
    text-decoration: underline;
    cursor: pointer;
    margin-left: 10px;
    opacity: 0.8;
}

.edit-btn:hover {
    opacity: 1;
}
</style>
</head>
<body>

<!-- =========================================================
     HEADER (FUNCTIONAL)
========================================================= -->
<header id="topbar">
  

  <!-- LEFT -->
  <div class="header-left">
      <div class="menu-icon" onclick="openMenu()"><img src="menu.svg"></div>
      
      <a href="catalog.html" class="desktop-only">CATALOG</a>
      <a href="catalog.html" class="desktop-only">BAGS</a>
      <a href="social media.html" class="desktop-only">SOCIALS</a>
  </div>

  <!-- CENTER -->
  <div class="header-center">
    <a href="index.html">
      <img src="minara 5 transparent 2.svg" class="header-logo">
      </a>
  </div>

  <!-- RIGHT -->
  <div class="header-right">
      <ul>
        <li><a href="contact.html" class="desktop-only"><img src="question mark.svg" class="question-icon">Contact</a></li>
        <li class="header-account">
    <div class="account-trigger" onclick="accountClicked(event)">
        <img src="head shoulder.svg" class="desktop-icon">
        <span id="accountLabel" class="account-label">ACCOUNT</span>
    </div>
</li>

        <li>
          <span class="cart-btn" onclick="openCart()">
            <img src="cart.svg">
            <span id="cartCountHeader">00</span>
          </span>
        </li>
      </ul>
  </div>

</header>
<div id="accountDropdown" class="acc-dropdown">
    <div class="acc-head">
        <span id="accName">ACCOUNT</span>
        <span class="acc-close" onclick="closeAccDropdown()">X CLOSE</span>
    </div>

    <a href="accountorder.html" class="acc-item">MY ORDERS</a>
    <a href="#" onclick="logout()" class="acc-item">LOG OUT</a>
</div>


<!-- =========================================================
     CART PANEL + MENU
========================================================= -->
<div id="pageDimmer"></div>

<div id="cartPanel">
  <div class="cart-header-row">
    <span>BAG <span id="cartCountPanel">00</span></span>
    <span class="cart-close" onclick="closeCart()">X CLOSE</span>
  </div>

  <div class="cart-ascii-wrap">
    <div class="cart-ascii">
 _____   __  __   ____    _____  __   __
| ____| |  \/  | |  _ \  |_   _| \ \ / /
|  _|   | |\/| | | |_) |   | |    \ V / 
| |___  | |  | | |  __/    | |     | |  
|_____| |_|  |_| |_|       |_|     |_|  
    </div>
  </div>

  <div class="cart-body">
    <p>Missing items in your cart?</p>
    <p>Sign in to see items you added before.</p>

    <div class="cart-auth-links">
      <a href="account.html">Sign in</a>
      <a href="account.html">Register</a>
    </div>
  </div>

  <div class="cart-bottom">
    <div class="cart-section">Shipping</div>
    <div class="cart-section">Total</div>
    <div class="cart-section">Payment</div>
  </div>
</div>

<div class="slideout" id="menuPanel">
  <div class="close-btn" onclick="closeMenu()">×</div>
  <a href="catalog.html">Catalog</a>
  <a href="social media.html">Social Media</a>
  <a href="contact.html">Contact</a>
  <div class="mobile-account-block">

  <div
    id="mobileMyAccount"
    class="mobile-account-link"
  >
    LOGIN
  </div>

  <div
    id="mobileAccountDropdown"
    class="mobile-account-dropdown"
  ></div>

  <div
    id="mobileLogout"
    class="mobile-account-link logout"
    style="display:none;"
  >
    LOG OUT
  </div>

</div>

</div>

<!-- =========================================================
     MAIN ACCOUNT CONTENT
========================================================= -->
<div class="wrapper">

  <h1>ACCOUNT</h1>

  <!-- INTRO SECTION -->
  <div class="account-intro">
      <h2 class="intro-title">Sign in or create</h2>

      <div class="intro-location">
       
      </div>

      <ul class="intro-benefits">
        <li>Priority access to new sales</li>
        <li>Cart remembers your items</li>
        <li>Easily track your orders</li>
        <li>Pre-access to sale</li>
        <li>Priority shipping</li>
      </ul>
  </div>

<!-- LOGIN / EMAIL FIRST -->
<div id="login-box" class="box" style="display:block;">
  <div class="box-title" id="login-title" style="margin-bottom:10px;">ENTER YOUR EMAIL TO CONTINUE</div>
  <div class="login-subtext">We’ll find your account or create one..</div>

  <div id="email-static-display" style="display:none; text-align: left; margin-bottom: 20px;">
    <span id="display-selected-email"></span>
    <span class="edit-btn" onclick="goBackToEmail()">Edit</span>
</div>

  <div id="email-input-group">
    <input id="email-step" type="email" placeholder="Email">
    <button id="continue-btn" onclick="checkEmail()" style="margin-top:20px;">CONTINUE</button>
  </div>
  
  <p id="email-msg" style="margin-top:14px; font-size:12px; color: red;"></p>

  <div id="password-step" style="display:none; margin-top:10px;">
    <input id="login-password" type="password" placeholder="PASSWORD">
    
    <p style="margin-top:14px; font-size:12px;">
      <a href="#" onclick="showReset(); return false;" class="account-link" style="color: #551A8B !important; text-decoration: underline !important;">
        Forgot password?
      </a>
    </p>
    <button onclick="login()">SIGN IN</button>
  </div>
</div>




    <p id="resetMsg" style="font-size:12px;margin-top:10px;"></p>
    
    
    <p style="margin-top:20px; font-size:13px; cursor:pointer;" onclick="showRegister()">
        <a 
          href="#" 
          class="account-link" 
          onclick="showRegister(); return false;" 
          style="color: #551A8B !important; text-decoration: underline !important;"
        >
          
        </a>
    </p>
</div>

  <!-- REGISTER -->
  <div id="register-box" class="box">
      <div class="box-title">CREATE ACCOUNT</div>
      <input id="register-email" type="email" placeholder="Email">
      <input id="register-password" type="password" placeholder="Password">
      <button onclick="register()">REGISTER</button>
<p style="margin-top:20px; font-size:12px;">
      <a
        href="#"
        class="account-link"
        onclick="showLogin(); return false;"
        style="color: #551A8B !important; text-decoration: underline !important;"
      >
        Back to login
      </a>
    </p>

  </div>
  

<!-- RESET PASSWORD (ADD THIS) -->
<div id="reset-box" class="box">
  <div class="box-title">RESET PASSWORD</div>

  <input id="reset-email" type="email" placeholder="Email">

  <button onclick="sendPasswordReset()">SEND RESET LINK</button>


<p style="margin-top:20px; font-size:12px;">
      <a
        href="#"
        class="account-link"
        onclick="showLogin(); return false;"
        style="color: #551A8B !important; text-decoration: underline !important;"
      >
        Back to login
      </a>
    </p>
</div>


  <!-- LOGGED IN -->
  <div id="user-info">
      Logged in as <span id="user-email"></span><br><br>
      <button onclick="logout()">LOG OUT</button>
  </div>

</div>

<footer>©2026 MINARA5</footer>


<!-- =========================================================
     CART + MENU JS
========================================================= -->
<script>
function openCart(){
  document.getElementById('cartPanel').classList.add('open');
  document.getElementById('pageDimmer').classList.add('active');
  document.body.style.overflow='hidden';
}
function closeCart(){
  document.getElementById('cartPanel').classList.remove('open');
  document.getElementById('pageDimmer').classList.remove('active');
  document.body.style.overflow='';
}
document.getElementById('pageDimmer').addEventListener('click', closeCart);

function updateCartCount(n){
  const v=n<10?'0'+n:String(n);
  document.getElementById('cartCountHeader').textContent=v;
  document.getElementById('cartCountPanel').textContent=v;
}

function openMenu(){document.getElementById("menuPanel").classList.add("open");}
function closeMenu(){document.getElementById("menuPanel").classList.remove("open");}
</script>


<!-- =========================================================
     FIREBASE AUTH
========================================================= -->
<script type="module">

window.sendPasswordReset = function() {
  const email = document.getElementById("reset-email").value;
  if (!email) {
    alert("Please enter your email address.");
    return;
  }

  // Use the working function already defined in your header.js
  if (window.universalForgotPassword) {
    // We pass a fake event object so e.preventDefault() doesn't crash
    window.universalForgotPassword({ preventDefault: () => {} });
    showLogin(); 
  } else {
    alert("Auth system not ready. Please refresh.");
  }
};
window.showReset = function () {
  document.getElementById("login-box").style.display = "none";
  document.getElementById("register-box").style.display = "none";
  document.getElementById("user-info").style.display = "none";
  document.getElementById("reset-box").style.display = "block";
};


  // We use the "Master" functions from header.js to avoid conflicts
  window.showLogin = function() {
    document.getElementById("login-box").style.display = "block";
    document.getElementById("register-box").style.display = "none";
    document.getElementById("user-info").style.display = "none";
  };

  window.showRegister = function() {
    document.getElementById("login-box").style.display = "none";
    document.getElementById("register-box").style.display = "block";
    document.getElementById("user-info").style.display = "none";
  };

  window.register = function() {
    const email = document.getElementById("register-email").value;
    const password = document.getElementById("register-password").value;
    // This calls the working logic in header.js
    if (window.processRegister) window.processRegister(email, password);
  };

window.login = function() {
  // These now match your actual IDs: login-email and login-password
  const email = document.getElementById("login-email").value; 
  const password = document.getElementById("login-password").value;
  if (window.processLogin) window.processLogin(email, password);
};
  // This handles the "Logged in as" UI
// This version ensures the boxes appear even if Firebase is slow
  window.addEventListener('load', () => {
    // 1. First, make sure the correct box is visible by default
    if (window.location.pathname.includes("register")) {
        showRegister();
    } else {
        showLogin();
    }

    // 2. Then, wait for the header to tell us if someone is actually logged in
    setTimeout(() => {
        if (window.auth && window.auth.currentUser) {
            const user = window.auth.currentUser;
            document.getElementById("login-box").style.display = "none";
            document.getElementById("register-box").style.display = "none";
            document.getElementById("user-info").style.display = "block";
            document.getElementById("user-email").textContent = user.email;
        }
    }, 1000); // Wait 1 second for Firebase to wake up
  });
  function hideAllAccountBoxes() {
  document.getElementById("login-box").style.display = "none";
  document.getElementById("register-box").style.display = "none";
  document.getElementById("reset-box").style.display = "none";
  document.getElementById("user-info").style.display = "none";
}

window.showReset = function () {
  hideAllAccountBoxes();
  document.getElementById("reset-box").style.display = "block";
};

window.showLogin = function () {
  hideAllAccountBoxes();
  document.getElementById("login-box").style.display = "block";
};

// 1. Add this import at the very top of your <script type="module"> block
import { fetchSignInMethodsForEmail } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

// 2. The Logic to check account existence
window.checkEmail = async function () {
  const email = document.getElementById("email-step").value;
  const msg = document.getElementById("email-msg");
  const continueBtn = document.getElementById("continue-btn");
  const passwordStep = document.getElementById("password-step");

  if (!email) {
    msg.textContent = "Please enter your email.";
    return;
  }

  try {
    // Firebase checks if this email is already registered
    const methods = await fetchSignInMethodsForEmail(window.auth, email);

    if (methods.length > 0) {
      // ACCOUNT EXISTS -> Show Password step on THIS page
     if (methods.length > 0) {
    // 1. Hide the email input and the new sub-text
    document.getElementById("email-input-group").style.display = "none";
    const subtext = document.querySelector(".login-subtext");
    if (subtext) subtext.style.display = "none";

    // 2. Show the password step and static email
    document.getElementById("static-email-wrap").style.display = "block"; // Ensure this matches your ID
    document.getElementById("password-step").style.display = "block";
    
    // 3. Update the Header Text exactly as requested
    document.getElementById("login-title").textContent = "ENTER PASSWORD TO LOGIN";
    
    // 4. Set the email text
    document.getElementById("display-selected-email").textContent = email;
    document.getElementById("email-msg").textContent = "";
}
      // ACCOUNT DOES NOT EXIST -> Redirect to register.html with the email in the URL
      // This "saves" the email for the next page
      window.location.href = `register.html?email=${encodeURIComponent(email)}`;
    }
  } catch (error) {
    console.error(error);
    msg.textContent = "Error checking email. Please try again.";
  }
};

window.login = function() {
  const email = document.getElementById("email-step").value; 
  const password = document.getElementById("login-password").value;
  
  if (!password) {
    alert("Please enter your password.");
    return;
  }

  if (window.processLogin) {
    window.processLogin(email, password);
  }
};

// Function to go back and edit the email
window.goBackToEmail = function() {
  document.getElementById("email-input-group").style.display = "block";
  document.getElementById("email-static-display").style.display = "none";
  document.getElementById("password-step").style.display = "none";
  document.getElementById("login-title").textContent = "SIGN IN OR CREATE";
  document.getElementById("email-msg").textContent = "";
};

// Updated checkEmail to handle the UI swap
window.checkEmail = async function () {
  const email = document.getElementById("email-step").value;
  const msg = document.getElementById("email-msg");
  const inputGroup = document.getElementById("email-input-group");
  const staticDisplay = document.getElementById("email-static-display");
  const passwordStep = document.getElementById("password-step");
  const displayText = document.getElementById("display-selected-email");

  if (!email) {
    msg.textContent = "Please enter your email.";
    return;
  }

  try {
    const methods = await fetchSignInMethodsForEmail(window.auth, email);

    if (methods.length > 0) {
      // ACCOUNT EXISTS: Hide input group, show static email and password box
      inputGroup.style.display = "none";
      staticDisplay.style.display = "block";
      passwordStep.style.display = "block";
      
      displayText.textContent = email; // Set the email text
      document.getElementById("login-title").textContent = "ENTER PASSWORD TO LOGIN";
      msg.textContent = "";
    } else {
      // NO ACCOUNT: Redirect to register with email saved in URL
      window.location.href = `register.html?email=${encodeURIComponent(email)}`;
    }
  } catch (error) {
    console.error(error);
    msg.textContent = "Error checking email. Please try again.";
  }
};

</script>

<script type="module" src="header.js"></script>


</body>
</html>
