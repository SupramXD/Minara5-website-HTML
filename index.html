<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Minara - Fashion Brand</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box;}
  body{font-family:Helvetica,Arial,sans-serif;background:#fff;overflow-x:hidden;}

  /* HEADER */
  header{
    position:fixed;top:0;left:0;right:0;
    height:45px;background:rgba(255,255,255,0.95);
    display:flex;justify-content:space-between;align-items:flex-start;
    padding:4px 30px;z-index:1200;border-bottom:1px solid #eee;
  }
  .left-nav a{font-size:11px;text-transform:uppercase;letter-spacing:1px;color:#000;text-decoration:none;margin-top:2px;}
  nav ul{list-style:none;display:flex;margin:2px 0 0 0;padding:0;}
  nav ul li{margin-left:25px;}
  nav ul li a{font-size:11px;text-transform:uppercase;letter-spacing:1px;color:#000;text-decoration:none;}
  nav ul li a:hover{color:#666;}

  /* Small header logo */
  .header-logo{
    position:absolute;left:50%;top:50%;
    transform:translate(-50%,-50%);
    height:22px;pointer-events:none;opacity:0;transition:opacity .25s ease;
  }
  .header-logo.show{opacity:1;}

  /* HERO (desktop) */
  .hero{
    margin-top:45px;        /* header height */
    position:relative;
    width:100vw;
    height:120vh;
    display:flex;
    overflow:hidden;
  }
  .hero img{
    height:100%;object-fit:cover;object-position:center;display:block;
  }
  .hero img:first-child{flex:1.3;}
  .hero img:last-child{flex:0.7;}

  /* Big logo default (desktop logic uses this) */
  #logo{
    position:fixed;left:50%;top:50%;
    transform:translate(-50%,-50%);
    width:1200px;z-index:900;pointer-events:none;will-change:transform, top;
  }
  #logo img{width:100%;height:auto;display:block;}

  /* Content */
  .section{padding:100px 40px;text-align:center;}
  .collections-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-top:40px;}
  .collection-item{background:#f5f5f5;height:400px;display:flex;align-items:center;justify-content:center;font-size:18px;color:#888;text-transform:uppercase;}
  footer{padding:40px;text-align:center;background:#f5f5f5;font-size:12px;color:#666;}

  /* ---------------- Mobile-only: “no-teleport” wrap ---------------- */
  @media (max-width:900px){
    :root{
      /* set by JS once; fallback to 1vh if JS fails */
      --vh: 1vh;
    }
    /* Replace the hero height that uses live vh with a stable pixel value:
       height: calc(var(--vh) * 120) equals the old 120vh, but does NOT change
       when the URL bar hides (because we freeze --vh). */
    .hero{
      height: calc(var(--vh) * 120);
      display:block;
    }
    .hero img{
      width:100%;height:100%;
      object-fit:cover;
    }

    /* On mobile the logo lives INSIDE the hero in document space (absolute),
       and we move it with translateY based on scroll. */
    #logo{
      position:absolute;     /* important: not fixed on mobile */
      left:50%;
      top:0;                 /* we'll translate it manually */
      transform:translate(-50%, 0);
      width:auto;max-width:88vw;max-height:36vh;
    }
  }
</style>
</head>
<body>

<header>
  <div class="left-nav"><a href="#catalog">Catalog</a></div>
  <img id="headerLogo" class="header-logo" src="minara 5 transparent.svg" alt="Minara small">
  <nav>
    <ul>
      <li><a href="#home">Home</a></li>
      <li><a href="#contact">Contact</a></li>
      <li><a href="auth.html">Account</a></li>
    </ul>
  </nav>
</header>

<section id="hero" class="hero">
  <img src="test3.png" alt="Left" id="imgL">
  <img src="number23.png" alt="Right" id="imgR">

  <!-- NOTE: on mobile, the logo is absolutely positioned INSIDE this hero -->
  <div id="logo"><img src="minara 5 transparent.svg" alt="Minara"></div>
</section>

<section class="section">
  <h2>Collections</h2>
  <div class="collections-grid">
    <div class="collection-item">Collection 1</div>
    <div class="collection-item">Collection 2</div>
    <div class="collection-item">Collection 3</div>
    <div class="collection-item">Collection 4</div>
  </div>
</section>

<footer>© 2025 Minara5</footer>

<script>
(function(){
  const logo = document.getElementById('logo');
  const hero = document.getElementById('hero');
  const headerLogo = document.getElementById('headerLogo');
  const isMobile = () => window.matchMedia('(max-width:900px)').matches;

  /* 1) Freeze mobile vh once, so the hero height never changes when URL bar hides */
  function setStableVh(){
    if(!isMobile()) return;
    // Use window.innerHeight, not visualViewport.height, and DO NOT update on scroll.
    const vh = window.innerHeight * 0.01;
    document.documentElement.style.setProperty('--vh', `${vh}px`);
  }

  let heroTop=0, heroH=0, heroBottom=0;

  function measureHero(){
    // Because we froze --vh, hero gets a stable pixel height; use offsets.
    heroTop = hero.offsetTop;
    heroH = hero.offsetHeight;
    heroBottom = heroTop + heroH;
  }

  function update(){
    const scrollY = window.scrollY || window.pageYOffset;

    if (!isMobile()) {
      // ---------------- DESKTOP: original behavior ----------------
      // Keep your original center→lock math (logo is fixed on desktop)
      const vh = window.innerHeight;
      // Temporarily ensure desktop logo is fixed (when we exit mobile rules)
      logo.style.position = 'fixed';
      logo.style.left = '50%';
      logo.style.top = '50%';
      logo.style.transform = 'translate(-50%,-50%)';

      // Compute lock: when logo bottom would pass hero bottom
      const logoRect = logo.getBoundingClientRect();
      const logoH = logoRect.height || 1;
      const logoBottomDoc = scrollY + vh/2 + logoH/2;
      const shouldLock = (logoBottomDoc >= heroBottom - 1);

      if (shouldLock) {
        const absTop = heroBottom - logoH - 1;
        logo.style.position = 'absolute';
        logo.style.top = absTop + 'px';
        logo.style.left = '50%';
        logo.style.transform = 'translateX(-50%)';
      }

      const r = logo.getBoundingClientRect();
      const visible = !(r.bottom <= 0 || r.top >= window.innerHeight);
      headerLogo.classList.toggle('show', !visible);
      return;
    }

    // ---------------- MOBILE: no-teleport path ----------------
    // Logo is ABSOLUTE inside hero and we “parallax” it by translating
    // using pure document math (no viewport percentages)
    logo.style.position = 'absolute';
    logo.style.left = '50%';

    // Desired anchor point inside the hero (0..1). Adjust to taste.
    const anchor = 0.40; // 40% down the hero
    const targetCenterDoc = heroTop + heroH * anchor;

    // Current center in doc space we want for the logo
    // Convert to a top (logo is absolute; transform will center it visually)
    const logoRect = logo.getBoundingClientRect();
    const logoH = logoRect.height || 1;

    // Clamp when near bottom so it locks perfectly at hero bottom
    const minTop = heroTop;                         // top bound (not really hit)
    const maxTop = heroBottom - logoH - 1;         // bottom bound
    let desiredTop = targetCenterDoc - logoH/2;

    if (desiredTop > maxTop) desiredTop = maxTop;
    if (desiredTop < minTop) desiredTop = minTop;

    // Convert desiredTop (doc space) to translateY distance inside hero
    const translateY = desiredTop - heroTop; // because #logo’s CSS top is 0

    // Apply: absolute + translateY, horizontally centered
    logo.style.top = '0px';
    logo.style.transform = `translate(-50%, ${translateY}px)`;

    // Header mini-logo
    const r = logo.getBoundingClientRect();
    const visible = !(r.bottom <= 0 || r.top >= window.innerHeight);
    headerLogo.classList.toggle('show', !visible);
  }

  // rAF throttle
  let ticking = false;
  function requestUpdate(){
    if (!ticking) {
      requestAnimationFrame(() => { update(); ticking = false; });
      ticking = true;
    }
  }

  // Events
  window.addEventListener('scroll', requestUpdate, { passive:true });
  window.addEventListener('resize', () => {
    // Only recompute stable vh on real resizes (e.g., rotation),
    // NOT when URL bar hides (we purposely keep --vh frozen).
    const before = window.innerWidth;
    setTimeout(() => {
      // if width changed (rotation), refresh --vh
      if (window.innerWidth !== before) setStableVh();
      measureHero(); requestUpdate();
    }, 50);
  });
  window.addEventListener('orientationchange', () => {
    setStableVh(); measureHero(); requestUpdate();
  });
  window.addEventListener('load', () => {
    setStableVh(); measureHero(); requestUpdate();
  });

  // Kick once more after paint to be safe
  setTimeout(() => { setStableVh(); measureHero(); requestUpdate(); }, 60);
})();
</script>

</body>
</html>
