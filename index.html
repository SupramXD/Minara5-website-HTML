<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Minara - Fashion Brand</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box;}
  body{font-family:Helvetica,Arial,sans-serif;background:#fff;overflow-x:hidden;}

  /* HEADER */
  header{
    position:fixed;top:0;left:0;right:0;
    height:45px;background:rgba(255,255,255,0.95);
    display:flex;justify-content:space-between;align-items:flex-start;
    padding:4px 30px;z-index:1200;border-bottom:1px solid #eee;
  }
  .left-nav a{
    font-size:11px;text-transform:uppercase;letter-spacing:1px;
    color:#000;text-decoration:none;margin-top:2px;
  }
  nav ul{list-style:none;display:flex;margin:2px 0 0 0;padding:0;}
  nav ul li{margin-left:25px;}
  nav ul li a{font-size:11px;text-transform:uppercase;letter-spacing:1px;color:#000;text-decoration:none;}
  nav ul li a:hover{color:#666;}

  /* small header logo */
  .header-logo{
    position:absolute;left:50%;top:50%;
    transform:translate(-50%,-50%);
    height:22px;pointer-events:none;opacity:0;transition:opacity .25s ease;
  }
  .header-logo.show{opacity:1;}

  /* HERO */
  .hero{
    margin-top:45px;
    position:relative;
    width:100vw;
    height:120vh;
    display:flex;
    overflow:hidden;
  }
  .hero img{
    height:100%;
    object-fit:cover;
    object-position:center;
    display:block;
  }
  .hero img:first-child{flex:1.3;}
  .hero img:last-child{flex:0.7;}

  /* BIG LOGOS */
  /* Desktop + default mobile starts with this one (fixed, centered) */
  #logoFixed{
    position:fixed;
    left:50%;
    top:50%;
    transform:translate(-50%,-50%);
    width:1200px;
    z-index:900;
    pointer-events:none;
    will-change:transform, top;
  }
  #logoFixed img{width:100%;height:auto;display:block;}

  /* The doc-space twin used only on mobile during URL bar hide */
  #logoDoc{
    position:absolute;        /* in document space */
    left:50%;
    transform:translateX(-50%);
    width:1200px;             /* same visual size */
    z-index:900;
    pointer-events:none;
    display:none;             /* hidden until we swap */
  }
  #logoDoc img{width:100%;height:auto;display:block;}

  /* CONTENT */
  .section{padding:100px 40px;text-align:center;}
  .collections-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-top:40px;}
  .collection-item{background:#f5f5f5;height:400px;display:flex;align-items:center;justify-content:center;font-size:18px;color:#888;text-transform:uppercase;}
  footer{padding:40px;text-align:center;background:#f5f5f5;font-size:12px;color:#666;}

  /* MOBILE sizing */
  @media (max-width:900px){
    .hero{display:block;height:auto;overflow:visible;}
    .hero img{width:100%;height:auto;object-fit:contain;display:block;}
    #logoFixed, #logoDoc{width:auto;max-width:88vw;max-height:36vh;}
  }

  /* Ensure no transitions surprise desktop */
  @media (min-width:901px){
    #logoFixed{transition:none !important;}
  }
</style>
</head>
<body>

<header>
  <div class="left-nav"><a href="#catalog">Catalog</a></div>
  <img id="headerLogo" class="header-logo" src="minara 5 transparent.svg" alt="Minara small">
  <nav>
    <ul>
      <li><a href="#home">Home</a></li>
      <li><a href="#contact">Contact</a></li>
      <li><a href="auth.html">Account</a></li>
    </ul>
  </nav>
</header>

<section id="hero" class="hero">
  <img src="test3.png" alt="Left" id="imgL">
  <img src="number23.png" alt="Right" id="imgR">
</section>

<section class="section">
  <h2>Collections</h2>
  <div class="collections-grid">
    <div class="collection-item">Collection 1</div>
    <div class="collection-item">Collection 2</div>
    <div class="collection-item">Collection 3</div>
    <div class="collection-item">Collection 4</div>
  </div>
</section>

<footer>© 2025 Minara5</footer>

<!-- Two big logos -->
<div id="logoFixed"><img src="minara 5 transparent.svg" alt="Minara"></div>
<div id="logoDoc"><img src="minara 5 transparent.svg" alt="Minara"></div>

<script>
(function(){
  const logoFixed = document.getElementById('logoFixed'); // used on desktop + mobile default
  const logoDoc   = document.getElementById('logoDoc');   // used on mobile during URL bar hide
  const hero = document.getElementById('hero');
  const headerLogo = document.getElementById('headerLogo');

  const isMobile = () => window.matchMedia('(max-width:900px)').matches;

  // Desktop uses only the fixed logo
  let heroBottom = 0;

  // Mobile state
  let active = 'fixed'; // 'fixed' | 'doc'
  let mode = 'center';  // 'center' | 'anchored' | 'locked' (applies to fixed path)
  let anchorOffsetPx = 0;
  let lastFixedCenterY = null;
  let vvLastH = (window.visualViewport && window.visualViewport.height) || 0;

  function measureHero(){
    heroBottom = hero.offsetTop + hero.offsetHeight;
  }

  function showFixed(){
    logoFixed.style.display = 'block';
    logoDoc.style.display = 'none';
    active = 'fixed';
  }
  function showDoc(){
    logoFixed.style.display = 'none';
    logoDoc.style.display = 'block';
    active = 'doc';
  }

  function updateDesktop(){
    const scrollY = window.scrollY || window.pageYOffset;
    const vh = window.innerHeight;
    const rect = logoFixed.getBoundingClientRect();
    const logoH = rect.height || 1;
    const logoBottomDoc = scrollY + vh/2 + logoH/2;
    const shouldLock = (logoBottomDoc >= heroBottom - 1);

    if (shouldLock) {
      const absTop = heroBottom - logoH - 1;
      logoFixed.style.position = 'absolute';
      logoFixed.style.top = absTop + 'px';
      logoFixed.style.left = '50%';
      logoFixed.style.transform = 'translateX(-50%)';
    } else {
      logoFixed.style.position = 'fixed';
      logoFixed.style.top = '50%';
      logoFixed.style.left = '50%';
      logoFixed.style.transform = 'translate(-50%,-50%)';
    }

    const r = logoFixed.getBoundingClientRect();
    const visible = !(r.bottom <= 0 || r.top >= window.innerHeight);
    headerLogo.classList.toggle('show', !visible);
  }

  function updateMobile(){
    const scrollY = window.scrollY || window.pageYOffset;

    if (active === 'fixed') {
      // Normal fixed behaviour (centered or anchored) until lock
      const vh = window.innerHeight;
      const rect = logoFixed.getBoundingClientRect();
      const logoH = rect.height || 1;
      const baseTop = (mode === 'anchored') ? `calc(50% + ${anchorOffsetPx}px)` : '50%';
      logoFixed.style.position = 'fixed';
      logoFixed.style.top = baseTop;
      logoFixed.style.left = '50%';
      logoFixed.style.transform = 'translate(-50%,-50%)';

      // lock detection based on current visual position
      const centerY = rect.top + rect.height/2;
      const logoBottomDoc = scrollY + centerY + logoH/2;
      const shouldLock = (logoBottomDoc >= heroBottom - 1);

      if (shouldLock) {
        // lock onto hero bottom in doc space
        const absTop = heroBottom - logoH - 1;
        logoFixed.style.position = 'absolute';
        logoFixed.style.top = absTop + 'px';
        logoFixed.style.left = '50%';
        logoFixed.style.transform = 'translateX(-50%)';
        mode = 'locked';
      }

      // cache for seamless swap
      lastFixedCenterY = centerY;

      // header mini-logo
      const visible = !(rect.bottom <= 0 || rect.top >= window.innerHeight);
      headerLogo.classList.toggle('show', !visible);
    } else {
      // active === 'doc' → keep the doc logo glued to the hero in *document* space
      const rDoc = logoDoc.getBoundingClientRect();
      const logoH = rDoc.height || 1;

      // desired document Y for the logo's center (anchor inside hero)
      const desiredCenterDoc = hero.offsetTop + hero.offsetHeight * 0.4;
      let absTop = desiredCenterDoc - logoH/2;

      // clamp to hero bottom
      const heroBottomLocal = hero.offsetTop + hero.offsetHeight;
      if (absTop + logoH > heroBottomLocal - 1) {
        absTop = heroBottomLocal - logoH - 1;
      }

      logoDoc.style.position = 'absolute';
      logoDoc.style.top = absTop + 'px';
      logoDoc.style.left = '50%';
      logoDoc.style.transform = 'translateX(-50%)';

      // header mini-logo visibility (based on whichever logo is active)
      const r = logoDoc.getBoundingClientRect();
      const visible = !(r.bottom <= 0 || r.top >= window.innerHeight);
      headerLogo.classList.toggle('show', !visible);
    }
  }

  function update(){
    if (!isMobile()) {
      // Desktop: only fixed logo is used; ensure doc logo is hidden
      showFixed();
      updateDesktop();
      return;
    }
    updateMobile();
  }

  // Swap handlers (mobile only)
  function swapToDocExact(){
    // Place doc logo at the exact same screen spot as fixed, then hide fixed
    const rF = logoFixed.getBoundingClientRect();
    const docTop = window.scrollY + rF.top; // doc-space top
    logoDoc.style.top = docTop + 'px';
    logoDoc.style.left = '50%';
    logoDoc.style.transform = 'translateX(-50%)';
    showDoc();
  }

  function swapToFixedExact(){
    // Place fixed logo so its center equals current doc logo center on screen
    const rD = logoDoc.getBoundingClientRect();
    const currentCenter = rD.top + rD.height/2;
    const viewportCenter = window.innerHeight / 2;
    anchorOffsetPx = currentCenter - viewportCenter; // so fixed is visually identical
    mode = 'anchored';
    showFixed();
  }

  // rAF throttle
  let ticking = false;
  function requestUpdate(){
    if (!ticking) {
      requestAnimationFrame(() => { update(); ticking = false; });
      ticking = true;
    }
  }

  // VisualViewport events to detect URL bar hide/show and swap precisely
  if (window.visualViewport) {
    window.visualViewport.addEventListener('resize', () => {
      if (!isMobile()) return;
      const h = window.visualViewport.height;
      const dh = h - vvLastH;
      vvLastH = h;

      // URL bar hides → swap from fixed → doc at identical pixel
      if (dh > 40 && active === 'fixed' && mode !== 'locked') {
        swapToDocExact();
        requestUpdate();
      }

      // URL bar shows again → swap doc → fixed at identical pixel
      if (dh < -40 && active === 'doc') {
        swapToFixedExact();
        requestUpdate();
      }
    }, { passive:true });

    // keep updating while the bar animates
    window.visualViewport.addEventListener('scroll', requestUpdate, { passive:true });
  }

  window.addEventListener('scroll', requestUpdate, { passive:true });
  window.addEventListener('resize', () => { measureHero(); requestUpdate(); });
  window.addEventListener('orientationchange', () => { measureHero(); requestUpdate(); });
  window.addEventListener('load', () => { measureHero(); requestUpdate(); });

  // Kickstart
  setTimeout(() => { measureHero(); requestUpdate(); }, 60);
})();
</script>

</body>
</html>
