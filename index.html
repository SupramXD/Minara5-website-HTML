<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Minara - Fashion Brand</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box;}
  body{font-family:Helvetica,Arial,sans-serif;background:#fff;overflow-x:hidden;color:#000;}

  /* HEADER */
  header{
    position:fixed;top:0;left:0;right:0;
    height:45px;background:rgba(255,255,255,0.95);
    display:flex;justify-content:space-between;align-items:flex-start;
    padding:4px 30px;z-index:1200;border-bottom:1px solid #eee;
  }
  .left-nav a{
    font-size:11px;text-transform:uppercase;letter-spacing:1px;
    color:#000;text-decoration:none;margin-top:2px;
  }
  nav ul{list-style:none;display:flex;margin:2px 0 0 0;padding:0;}
  nav ul li{margin-left:25px;}
  nav ul li a{font-size:11px;text-transform:uppercase;letter-spacing:1px;color:#000;text-decoration:none;}
  nav ul li a:hover{color:#666;}

  /* Small header logo appears only when big one is gone */
  .header-logo{
    position:absolute;left:50%;top:50%;
    transform:translate(-50%,-50%);
    height:22px;pointer-events:none;opacity:0;transition:opacity .25s ease;
  }
  .header-logo.show{opacity:1;}

  /* HERO (desktop: two columns; mobile: stacked) */
  .hero{
    margin-top:45px;
    position:relative;
    width:100vw;
    display:flex;             /* desktop default */
    overflow:hidden;
  }
  .hero .colL,.hero .colR{height:120vh;}         /* desktop height */
  .hero .colL{flex:1.3;position:relative;}
  .hero .colR{flex:0.7;position:relative;}

  .hero img{
    width:100%;height:100%;
    object-fit:cover;object-position:center;display:block;
  }

  /* BIG LOGO element (we will toggle between fixed/absolute in JS) */
  #logo{
    position:fixed;left:50%;top:50%;
    transform:translate(-50%,-50%);
    width:1200px;z-index:900;pointer-events:none;will-change:transform, top;
  }
  #logo img{width:100%;height:auto;display:block;}

  /* CONTENT */
  .section{padding:100px 40px;text-align:center;}
  .collections-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-top:40px;}
  .collection-item{background:#f5f5f5;height:400px;display:flex;align-items:center;justify-content:center;font-size:18px;color:#888;text-transform:uppercase;}
  footer{padding:40px;text-align:center;background:#f5f5f5;font-size:12px;color:#666;}

  /* ---------------- MOBILE (stack both images; no clipping) ---------------- */
  @media (max-width:900px){
    .hero{display:block;overflow:visible;} /* stack */
    .hero .colL,.hero .colR{height:auto;}
    .hero img{width:100%;height:auto;display:block;}
    #logo{width:auto;max-width:88vw;max-height:36vh;}
  }

  /* Avoid any surprise transitions on desktop */
  @media (min-width:901px){
    #logo{transition:none !important;}
  }
</style>
</head>
<body>

<header>
  <div class="left-nav"><a href="#catalog">Catalog</a></div>
  <img id="headerLogo" class="header-logo" src="minara 5 transparent.svg" alt="Minara small">
  <nav>
    <ul>
      <li><a href="#home">Home</a></li>
      <li><a href="#contact">Contact</a></li>
      <li><a href="auth.html">Account</a></li>
    </ul>
  </nav>
</header>

<section id="hero" class="hero">
  <div class="colL"><img src="test3.png" alt="Left" id="imgL"></div>
  <div class="colR"><img src="number23.png" alt="Right" id="imgR"></div>
</section>

<section class="section">
  <h2>Collections</h2>
  <div class="collections-grid">
    <div class="collection-item">Collection 1</div>
    <div class="collection-item">Collection 2</div>
    <div class="collection-item">Collection 3</div>
    <div class="collection-item">Collection 4</div>
  </div>
</section>

<footer>Â© 2025 Minara5</footer>

<!-- Big logo lives outside hero so desktop absolute lock is in page coords -->
<div id="logo"><img src="minara 5 transparent.svg" alt="Minara"></div>

<script>
(function(){
  const logo = document.getElementById('logo');
  const hero = document.getElementById('hero');
  const colL = hero.querySelector('.colL');
  const headerLogo = document.getElementById('headerLogo');

  // Detect narrow layout via CSS width, BUT also detect URL-bar behavior and override.
  const mq = window.matchMedia('(max-width:900px)');
  const isNarrow = () => mq.matches;

  // Runtime override: if the visual viewport height jumps (URL bar), force doc-mode
  let docModeOverride = false;
  let overrideTimer = null;
  let lastVVH = (window.visualViewport && window.visualViewport.height) || 0;

  // Measurements
  let heroTop = 0, heroH = 0, heroBottom = 0;     // whole hero
  let colLTop = 0, colLH = 0, colLBottom = 0;     // left/top image area (mobile anchor)

  function measure(){
    const rectHero = hero.getBoundingClientRect();
    const scrollY = window.scrollY || window.pageYOffset;

    heroTop    = hero.offsetTop;
    heroH      = hero.offsetHeight;
    heroBottom = heroTop + heroH;

    colLTop     = colL.offsetTop;            // relative to doc
    colLH       = colL.offsetHeight;
    colLBottom  = colLTop + colLH;
  }

  // Desktop behavior: center while inside hero, then lock to bottom
  function updateDesktop(){
    const scrollY = window.scrollY || window.pageYOffset;
    const vh = window.innerHeight;
    const rect = logo.getBoundingClientRect();
    const logoH = rect.height || 1;
    const logoBottomDoc = scrollY + vh/2 + logoH/2;
    const shouldLock = (logoBottomDoc >= heroBottom - 1);

    if (shouldLock) {
      const absTop = heroBottom - logoH - 1;
      logo.style.position = 'absolute';
      logo.style.top = absTop + 'px';
      logo.style.left = '50%';
      logo.style.transform = 'translateX(-50%)';
    } else {
      logo.style.position = 'fixed';
      logo.style.top = '50%';
      logo.style.left = '50%';
      logo.style.transform = 'translate(-50%,-50%)';
    }

    const r = logo.getBoundingClientRect();
    const visible = !(r.bottom <= 0 || r.top >= window.innerHeight);
    headerLogo.classList.toggle('show', !visible);
  }

  // Document-space behavior: no teleport, follows hero, locks at colL bottom
  function updateDocMode(){
    // Where inside the top image should the logo sit?
    const anchor = 0.40;  // tweak 0.35..0.45 to taste
    const targetCenterDoc = colLTop + colLH * anchor;

    // Measure the logo height on current frame
    const rNow = logo.getBoundingClientRect();
    const logoH = rNow.height || 1;

    // Compute desired top in document space, clamp to bottom of colL
    let desiredTop = targetCenterDoc - logoH/2;
    if (desiredTop > (colLBottom - logoH - 1)) desiredTop = colLBottom - logoH - 1;
    if (desiredTop < colLTop) desiredTop = colLTop;

    // Place the logo in document space using absolute + translateY
    logo.style.position = 'absolute';
    logo.style.top = '0px';                // origin at doc top
    logo.style.left = '50%';
    logo.style.transform = `translate(-50%, ${desiredTop}px)`;

    // Header small logo visibility
    const r = logo.getBoundingClientRect();
    const visible = !(r.bottom <= 0 || r.top >= window.innerHeight);
    headerLogo.classList.toggle('show', !visible);
  }

  // Decide which path to render this frame
  function update(){
    // If URL bar activity detected recently, force document-mode to prevent jumps,
    // regardless of width (covers "Desktop site" on a phone).
    const useDocMode = docModeOverride || isNarrow();

    if (useDocMode) {
      updateDocMode();
    } else {
      updateDesktop();
    }
  }

  // Watch visualViewport to toggle doc-mode when URL bar animates
  if (window.visualViewport) {
    window.visualViewport.addEventListener('resize', () => {
      const h = window.visualViewport.height;
      const dh = h - lastVVH;
      lastVVH = h;
      // any significant quick change => enable override briefly
      if (Math.abs(dh) > 24) {
        docModeOverride = true;
        clearTimeout(overrideTimer);
        overrideTimer = setTimeout(() => { docModeOverride = false; }, 600);
      }
      requestUpdate();
    }, { passive: true });
    window.visualViewport.addEventListener('scroll', () => {
      requestUpdate();
    }, { passive: true });
  }

  // rAF throttle
  let ticking = false;
  function requestUpdate(){
    if (!ticking) {
      requestAnimationFrame(() => { measure(); update(); ticking = false; });
      ticking = true;
    }
  }

  // Events
  window.addEventListener('scroll', requestUpdate, { passive:true });
  window.addEventListener('resize', requestUpdate, { passive:true });
  window.addEventListener('orientationchange', requestUpdate, { passive:true });
  window.addEventListener('load', requestUpdate);

  // Kick
  setTimeout(requestUpdate, 60);
})();
</script>

</body>
</html>
